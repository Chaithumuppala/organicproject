{% extends 'base.html' %}

{% block title %}
    Sign Up
{% endblock title %}

{% block content %}
{% endblock content %}

{% block bodyform %}
    <br>

    <form action="/auth/signup/" method="post"
          style="background-color: lightgray; width: 350px; padding: 30px; display: block; margin: 0 auto; border-radius: 40px; position: relative;">
        {% csrf_token %}

        <!-- Display error messages inside the form -->
        {% if messages %}
    <div id="message-container" style="text-align: center; margin-bottom: 10px;">
        {% for message in messages %}
            <div class="alert alert-{{ message.tags }}" id="notification-{{ forloop.counter }}"
                 style="font-size: 14px; padding: 5px; background-color: #f8d7da; color: #721c24;
                        border-radius: 10px; display: inline-block; margin: 5px;">
                {{ message }}
                <button type="button" style="border: none; background: transparent; color: black; font-weight: bold; margin-left: 10px;"
                        onclick="dismissMessage('notification-{{ forloop.counter }}')">×</button>
            </div>
        {% endfor %}
    </div>
{% endif %}

        <label for="email" style="font-size: 20px" class="text-black">Email</label>
        <div class="form-group">
            <input type="email" class="form-control" id="email" name="email"
                   style="width: 300px; display: block; margin: 0 auto; background-color: transparent; border: 1.5px solid black; color: black !important;"
                   required>
        </div>

        <label for="pass1" style="font-size: 20px" class="text-dark">Password</label>
        <div class="form-group">
            <input type="password" class="form-control" id="pass1" name="pass1"
                   style="width: 300px; display: block; margin: 0 auto; background-color: transparent; border: 1.5px solid black; color: black !important;"
                   required>
        </div>

        <label for="pass2" style="font-size: 20px" class="text-dark">Confirm Password</label>
        <div class="form-group">
            <input type="password" class="form-control" id="pass2" name="pass2"
                   style="width: 300px; display: block; margin: 0 auto; background-color: transparent; border: 1.5px solid black; color: black !important;"
                   required>
        </div>
        <br>

        <button type="submit" class="btn bg-danger p-1.5">Sign Up</button>

        <br><br>

        <span style="color: black">Already User?</span> <a href="/auth/login/">Login</a>

    </form>

    <script>
    // Auto-hide messages after 5 seconds
    setTimeout(function() {
        let messages = document.querySelectorAll("[id^='notification-']");
        messages.forEach(message => {
            message.style.display = "none";
        });
    }, 5000);

    // Manually dismiss message when clicking '×'
    function dismissMessage(id) {
        let element = document.getElementById(id);
        if (element) {
            element.style.display = "none";
        }
    }
</script>


{% endblock bodyform %}
